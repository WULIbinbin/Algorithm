(function(u,f){typeof exports=="object"&&typeof module<"u"?f(exports):typeof define=="function"&&define.amd?define(["exports"],f):(u=typeof globalThis<"u"?globalThis:u||self,f(u.es={}))})(this,function(u){"use strict";function f(s,e="undefined"){return Object.prototype.toString.call(s)===`[object ${e[0].toUpperCase()}${e.substring(1)}]`}const r={Pending:"pending",Fulfilled:"fulfilled",Rejected:"rejected"};function o(s){const e=this;this.PromiseState=r.Pending,this.PromiseResult=void 0,this.onFulfilledCallBack=[],this.onRejectedCallBack=[];try{if(!f(s,"function"))throw new Error("\u8BF7\u6DFB\u52A0\u56DE\u8C03\u51FD\u6570");s(i,n)}catch(t){n(t)}function i(t){e.PromiseState===r.Pending&&(e.PromiseState=r.Fulfilled,e.PromiseResult=t,e.onFulfilledCallBack.forEach(c=>c(t)))}function n(t){e.PromiseState===r.Pending&&(e.PromiseState=r.Rejected,e.PromiseResult=t,e.onRejectedCallBack.forEach(c=>c(t)))}}o.prototype.then=function(e,i){f(e,"function")||(e=t=>t),f(i,"function")||(i=t=>t);const n=new o((t,c)=>{const a=()=>{try{setTimeout(()=>{const l=e(this.PromiseResult);d(n,l,t,c)})}catch(l){c(l)}},h=()=>{try{setTimeout(()=>{const l=i(this.PromiseResult);d(n,l,t,c)})}catch(l){c(l)}};this.PromiseState===r.Pending&&(this.onFulfilledCallBack.push(a),this.onRejectedCallBack.push(h)),this.PromiseState===r.Fulfilled&&a(),this.PromiseState===r.Rejected&&h()});return n};function d(s,e,i,n){if(s===e)throw new Error("\u4E0D\u80FD\u8FD4\u56DE\u81EA\u8EAB");e instanceof o?e.then(i,n):i(e)}o.resolve=function(e){return e instanceof o?e:new o(i=>{i(e)})},o.reject=function(e){return new o((i,n)=>{n(e)})};const P=o;u.MyPromise=P,Object.defineProperties(u,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
